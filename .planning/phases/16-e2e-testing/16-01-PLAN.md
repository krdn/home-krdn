---
phase: 16-e2e-testing
plan: 01
type: execute
depends_on: [15-01]
files_modified: [package.json, playwright.config.ts, e2e/*.spec.ts]
---

<objective>
Playwright E2E 테스트 환경을 구축하고 핵심 사용자 플로우를 테스트합니다.

Purpose: 브라우저 기반 통합 테스트로 실제 사용자 경험 검증
Output: Playwright 설정, 핵심 플로우 테스트 (인증, Dashboard, 프로젝트)
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-plan.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md

**기존 파일 참조:**
@package.json
@vitest.config.ts

**Prior Decisions:**
- Vitest for unit tests (Phase 3)
- JWT 인증 with httpOnly cookies (Phase 1)
- Admin 페이지는 인증 필요

**Tech stack available:**
- Next.js 16.1.1
- React 19
- TypeScript 5
</context>

<tasks>

<task type="auto">
  <name>Task 1: Playwright 설치 및 기본 설정</name>
  <files>package.json, playwright.config.ts</files>
  <action>
Playwright를 설치하고 Next.js와 통합되는 기본 설정을 구성합니다.

1. Playwright 설치:
   ```bash
   npm install -D @playwright/test
   npx playwright install chromium
   ```

2. playwright.config.ts 생성:
   - baseURL: http://localhost:3000
   - webServer: next dev 자동 시작
   - testDir: e2e/
   - 브라우저: chromium만 (빠른 실행)
   - retries: CI에서 2회

3. package.json scripts 추가:
   - "e2e": "playwright test"
   - "e2e:ui": "playwright test --ui"
   - "e2e:headed": "playwright test --headed"

4. .gitignore에 추가:
   - /test-results/
   - /playwright-report/
   - /playwright/.cache/
  </action>
  <verify>
- npx playwright --version 출력
- playwright.config.ts 존재
  </verify>
  <done>
Playwright 설치 완료, 기본 설정 파일 생성
  </done>
</task>

<task type="auto">
  <name>Task 2: 홈페이지 및 네비게이션 테스트</name>
  <files>e2e/navigation.spec.ts</files>
  <action>
홈페이지 로딩 및 기본 네비게이션을 테스트합니다.

1. e2e/ 디렉토리 생성

2. e2e/navigation.spec.ts 작성:
   ```typescript
   import { test, expect } from '@playwright/test';

   test.describe('Navigation', () => {
     test('홈페이지 로딩', async ({ page }) => {
       await page.goto('/');
       await expect(page).toHaveTitle(/Home/);
     });

     test('Projects 페이지 이동', async ({ page }) => {
       await page.goto('/');
       await page.click('text=Projects');
       await expect(page).toHaveURL(/\/projects/);
     });

     test('Services 페이지 이동', async ({ page }) => {
       await page.goto('/');
       await page.click('text=Services');
       await expect(page).toHaveURL(/\/services/);
     });
   });
   ```

3. 테스트 실행 및 검증
  </action>
  <verify>
- npm run e2e -- navigation.spec.ts 통과
  </verify>
  <done>
네비게이션 테스트 3개 통과
  </done>
</task>

<task type="auto">
  <name>Task 3: Admin 인증 플로우 테스트</name>
  <files>e2e/auth.spec.ts</files>
  <action>
Admin 로그인 및 인증 보호 테스트를 작성합니다.

1. e2e/auth.spec.ts 작성:
   ```typescript
   import { test, expect } from '@playwright/test';

   test.describe('Authentication', () => {
     test('미인증 시 /admin 접근 차단', async ({ page }) => {
       await page.goto('/admin');
       // 로그인 폼 또는 리다이렉트 확인
       await expect(page.locator('input[type="password"]')).toBeVisible();
     });

     test('로그인 성공', async ({ page }) => {
       await page.goto('/admin');
       await page.fill('input[type="password"]', process.env.ADMIN_PASSWORD || 'test');
       await page.click('button[type="submit"]');
       // Dashboard 로딩 확인
       await expect(page.locator('h1')).toContainText('Dashboard');
     });

     test('로그아웃', async ({ page }) => {
       // 로그인 후
       await page.goto('/admin');
       await page.fill('input[type="password"]', process.env.ADMIN_PASSWORD || 'test');
       await page.click('button[type="submit"]');
       await expect(page.locator('h1')).toContainText('Dashboard');

       // 로그아웃
       await page.click('text=Logout');
       await expect(page.locator('input[type="password"]')).toBeVisible();
     });
   });
   ```

2. 환경변수 설정 (.env.test 또는 playwright.config.ts에서)
  </action>
  <verify>
- npm run e2e -- auth.spec.ts 통과
  </verify>
  <done>
인증 테스트 3개 통과
  </done>
</task>

<task type="auto">
  <name>Task 4: Admin Dashboard 테스트</name>
  <files>e2e/admin-dashboard.spec.ts</files>
  <action>
Admin Dashboard의 핵심 기능을 테스트합니다.

1. e2e/admin-dashboard.spec.ts 작성:
   ```typescript
   import { test, expect } from '@playwright/test';

   test.describe('Admin Dashboard', () => {
     test.beforeEach(async ({ page }) => {
       // 로그인
       await page.goto('/admin');
       await page.fill('input[type="password"]', process.env.ADMIN_PASSWORD || 'test');
       await page.click('button[type="submit"]');
       await expect(page.locator('h1')).toContainText('Dashboard');
     });

     test('DashboardStats 표시', async ({ page }) => {
       await expect(page.locator('text=CPU')).toBeVisible();
       await expect(page.locator('text=Memory')).toBeVisible();
     });

     test('Quick Access 카드 표시', async ({ page }) => {
       await expect(page.locator('text=Quick Access')).toBeVisible();
       await expect(page.locator('text=Projects')).toBeVisible();
       await expect(page.locator('text=Alerts')).toBeVisible();
     });

     test('Sidebar 네비게이션', async ({ page }) => {
       await page.click('text=Projects');
       await expect(page).toHaveURL(/\/admin\/projects/);
     });
   });
   ```
  </action>
  <verify>
- npm run e2e -- admin-dashboard.spec.ts 통과
  </verify>
  <done>
Dashboard 테스트 4개 통과
  </done>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] Playwright 설치 완료
- [ ] playwright.config.ts 설정 완료
- [ ] npm run e2e 실행 성공
- [ ] 네비게이션 테스트 통과
- [ ] 인증 테스트 통과
- [ ] Dashboard 테스트 통과
</verification>

<success_criteria>

- All tasks completed
- All E2E tests passing
- Phase 16 complete, v1.1 milestone 완료
</success_criteria>

<output>
After completion, create `.planning/phases/16-e2e-testing/16-01-SUMMARY.md`
</output>
