---
phase: 26-e2e-test-activation
plan: 02
type: execute
depends_on: ["26-01"]
files_modified: [playwright.config.ts, e2e/admin-dashboard.spec.ts, e2e/authenticated-flows.spec.ts]
---

<objective>
다중 브라우저 지원 및 인증된 사용자 Admin 테스트 활성화

Purpose: Firefox, Safari 지원으로 크로스 브라우저 호환성 확보, Admin 테스트 활성화
Output: 다중 브라우저 설정, admin-dashboard.spec.ts 테스트 활성화
</objective>

<context>
@playwright.config.ts
@e2e/admin-dashboard.spec.ts
@e2e/fixtures/auth.ts (26-01에서 생성)

**현재 상태:**
- Chromium만 설정됨
- admin-dashboard.spec.ts에 test.skip 테스트 다수

**목표:**
- Firefox, Safari(webkit) 추가
- 인증된 상태로 Admin 페이지 테스트
</context>

<tasks>

<task type="auto">
  <name>Task 1: 다중 브라우저 설정</name>
  <files>playwright.config.ts</files>
  <action>
    playwright.config.ts에 Firefox, Safari 프로젝트 추가:

    ```typescript
    projects: [
      {
        name: 'chromium',
        use: { ...devices['Desktop Chrome'] },
      },
      {
        name: 'firefox',
        use: { ...devices['Desktop Firefox'] },
      },
      {
        name: 'webkit',
        use: { ...devices['Desktop Safari'] },
      },
    ],
    ```

    추가 설정:
    - screenshot: 'only-on-failure' 추가
    - video: 'retain-on-failure' 추가 (디버깅용)
  </action>
  <verify>npx playwright test --list 실행 시 3개 브라우저 프로젝트 표시</verify>
  <done>playwright.config.ts에 3개 브라우저 설정 완료</done>
</task>

<task type="auto">
  <name>Task 2: Admin Dashboard 테스트 활성화</name>
  <files>e2e/admin-dashboard.spec.ts</files>
  <action>
    test.skip을 제거하고 auth fixture 사용하여 활성화:

    1. auth fixture import:
       ```typescript
       import { test, expect } from './fixtures/auth';
       ```

    2. test.skip 제거하고 실제 테스트로 변경:
       - Dashboard 헤더 표시 테스트
       - Quick Access 섹션 표시 테스트
       - Admin 서브페이지 네비게이션 테스트

    3. 추가 테스트:
       - Admin Projects 페이지 로딩
       - Admin Alerts 페이지 로딩
       - Admin Settings 페이지 로딩 (있다면)

    AVOID: 하드코딩된 텍스트 매칭 (다국어 대응)
    WHY: 한글/영어 혼용 가능성
  </action>
  <verify>npx playwright test e2e/admin-dashboard.spec.ts --project=chromium 통과</verify>
  <done>admin-dashboard.spec.ts 8개 이상 테스트 활성화</done>
</task>

<task type="auto">
  <name>Task 3: 인증 플로우 통합 테스트</name>
  <files>e2e/authenticated-flows.spec.ts</files>
  <action>
    인증된 사용자의 주요 플로우 E2E 테스트:

    1. Docker 컨테이너 관리:
       - 컨테이너 목록 조회
       - 컨테이너 상태 확인

    2. 시스템 메트릭스:
       - /admin에서 시스템 상태 표시
       - CPU/메모리 메트릭스 표시

    3. 사용자 설정:
       - 테마 변경
       - 설정 저장 확인

    테스트 구조:
    ```typescript
    import { test, expect } from './fixtures/auth';

    test.describe('Authenticated User Flows', () => {
      test('Docker 컨테이너 목록 조회', async ({ page }) => {
        await page.goto('/admin');
        // 컨테이너 섹션 또는 Docker 관련 UI 확인
      });

      test('시스템 메트릭스 표시', async ({ page }) => {
        await page.goto('/admin');
        // CPU, Memory 등 메트릭스 표시 확인
      });
    });
    ```
  </action>
  <verify>npx playwright test e2e/authenticated-flows.spec.ts --project=chromium 통과</verify>
  <done>authenticated-flows.spec.ts 6개 이상 테스트 작성</done>
</task>

<task type="auto">
  <name>Task 4: 전체 E2E 테스트 실행 검증</name>
  <files>-</files>
  <action>
    모든 E2E 테스트를 3개 브라우저에서 실행:

    1. Chromium 테스트:
       ```bash
       npx playwright test --project=chromium
       ```

    2. Firefox 테스트:
       ```bash
       npx playwright test --project=firefox
       ```

    3. Webkit (Safari) 테스트:
       ```bash
       npx playwright test --project=webkit
       ```

    4. 전체 테스트 (CI용):
       ```bash
       npx playwright test
       ```

    실패 시 스크린샷/비디오 확인하여 수정
  </action>
  <verify>npx playwright test 전체 통과 (또는 환경 문제로 일부 브라우저 skip 가능)</verify>
  <done>E2E 테스트 전체 실행 성공</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] playwright.config.ts에 3개 브라우저 설정
- [ ] admin-dashboard.spec.ts test.skip 제거, 활성화
- [ ] authenticated-flows.spec.ts 신규 생성
- [ ] `npx playwright test --project=chromium` 모든 테스트 통과
</verification>

<success_criteria>
- 다중 브라우저 지원 (Chromium, Firefox, Webkit)
- 인증된 사용자 테스트 활성화
- Admin 페이지 E2E 테스트 커버리지 확대
</success_criteria>

<output>
After completion, create `.planning/phases/26-e2e-test-activation/26-02-SUMMARY.md`
</output>
