---
phase: 21-team-features
plan: 03
type: execute
depends_on: ["21-02"]
files_modified: [src/hooks/useTeams.ts, src/stores/teamStore.ts, src/app/teams/page.tsx, src/app/teams/[teamId]/page.tsx, src/app/teams/new/page.tsx, src/components/teams/TeamCard.tsx, src/components/teams/TeamMemberList.tsx, src/components/teams/InviteModal.tsx]
domain: next-js
---

<objective>
팀 관리 UI 페이지 및 컴포넌트를 구현하여 사용자가 팀을 생성, 관리, 초대할 수 있는 인터페이스를 제공합니다.

Purpose: 21-01, 21-02에서 구현한 API를 활용한 프론트엔드 UI 구현
Output: 팀 목록/상세/생성 페이지 + 팀 관련 컴포넌트 + React Query 훅
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-plan.md
./summary.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# 이전 플랜 참고
@.planning/phases/21-team-features/21-01-SUMMARY.md
@.planning/phases/21-team-features/21-02-SUMMARY.md

# 기존 UI 패턴 참고
@src/hooks/useSettings.ts
@src/hooks/useAuth.ts
@src/components/admin/WidgetCustomizer.tsx

# 디자인 시스템
@src/config/design.ts

**Tech stack available:** React 19, TanStack Query, Zustand, Tailwind CSS 4, Framer Motion
**Established patterns:** useSettings 훅 패턴, Modal 컴포넌트 패턴, Form 검증 패턴
**Constraining decisions:**
- Phase 21-01: Team API 구현 완료
- Phase 21-02: Invite API 구현 완료
- Phase 4: 디자인 시스템 + Framer Motion 애니메이션 패턴
</context>

<tasks>

<task type="auto">
  <name>Task 1: Team React Query 훅 및 Zustand 스토어 구현</name>
  <files>src/hooks/useTeams.ts, src/stores/teamStore.ts</files>
  <action>
1. useTeams.ts React Query 훅:
   - useMyTeams(): 현재 사용자의 팀 목록 조회 (GET /api/teams)
   - useTeam(teamId): 팀 상세 조회 (GET /api/teams/[teamId])
   - useTeamMembers(teamId): 팀 멤버 목록 (GET /api/teams/[teamId]/members)
   - useTeamInvites(teamId): 팀 초대 목록 (GET /api/teams/[teamId]/invites)
   - useCreateTeam(): 팀 생성 mutation (POST /api/teams)
   - useUpdateTeam(): 팀 수정 mutation (PATCH /api/teams/[teamId])
   - useDeleteTeam(): 팀 삭제 mutation (DELETE /api/teams/[teamId])
   - useInviteMember(): 멤버 초대 mutation (POST /api/teams/[teamId]/invites)
   - useRemoveMember(): 멤버 제거 mutation (DELETE /api/teams/[teamId]/members)
   - useAcceptInvite(): 초대 수락 mutation (POST /api/invites/[token])

Query key 패턴: ['teams'], ['team', teamId], ['team-members', teamId], ['team-invites', teamId]
Mutation 성공 시 관련 쿼리 invalidation

2. teamStore.ts Zustand 스토어:
   - currentTeamId: string | null (현재 선택된 팀)
   - setCurrentTeam(teamId): 팀 선택
   - clearCurrentTeam(): 선택 해제

useSettings.ts, useAuth.ts 패턴 참고하여 구현
  </action>
  <verify>npx tsc --noEmit 타입 검사 통과</verify>
  <done>useTeams.ts 훅 구현 (10개 훅), teamStore.ts 스토어 구현</done>
</task>

<task type="auto">
  <name>Task 2: 팀 페이지 및 컴포넌트 구현</name>
  <files>src/app/teams/page.tsx, src/app/teams/[teamId]/page.tsx, src/app/teams/new/page.tsx, src/components/teams/TeamCard.tsx, src/components/teams/TeamMemberList.tsx, src/components/teams/InviteModal.tsx</files>
  <action>
1. 팀 목록 페이지 (/teams/page.tsx):
   - 내 팀 목록 카드 그리드
   - "새 팀 만들기" 버튼 → /teams/new
   - 빈 상태 UI (팀 없을 때)
   - 로딩 스켈레톤

2. 팀 생성 페이지 (/teams/new/page.tsx):
   - 팀 이름 (필수), 설명 (선택) 입력 폼
   - 생성 버튼 (useCreateTeam mutation)
   - 성공 시 /teams/[newTeamId]로 리다이렉트

3. 팀 상세 페이지 (/teams/[teamId]/page.tsx):
   - 팀 정보 헤더 (이름, 설명, 생성일)
   - 멤버 목록 섹션 (TeamMemberList)
   - 초대 관리 섹션 (ADMIN 이상만 표시)
   - 팀 설정 버튼 (owner만 - 수정/삭제)
   - "멤버 초대" 버튼 → InviteModal 열기

4. TeamCard.tsx 컴포넌트:
   - 팀 이름, 설명 미리보기, 멤버 수
   - 클릭 시 /teams/[teamId]로 이동
   - Framer Motion hover 애니메이션

5. TeamMemberList.tsx 컴포넌트:
   - 멤버 목록 (아바타, 이름, 역할)
   - 역할 변경 드롭다운 (ADMIN만)
   - 멤버 제거 버튼 (ADMIN만)

6. InviteModal.tsx 컴포넌트:
   - 이메일 입력, 역할 선택
   - 초대 발송 버튼
   - 대기 중인 초대 목록
   - 초대 취소 버튼

WidgetCustomizer.tsx의 모달/드롭다운 패턴 참고
디자인: Tailwind CSS + design.ts 색상 체계 + motion 애니메이션
  </action>
  <verify>npm run build 빌드 성공, 타입 오류 없음</verify>
  <done>3개 페이지 + 3개 컴포넌트 구현, 모든 CRUD 기능 연동</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>팀 관리 UI 전체 (목록, 생성, 상세 페이지 + 멤버 관리 + 초대 모달)</what-built>
  <how-to-verify>
    1. Run: npm run dev
    2. Visit: http://localhost:3000 → 로그인
    3. Navigate: /teams 팀 목록 페이지
    4. Test: "새 팀 만들기" 버튼 → 팀 생성 폼 작성 → 생성
    5. Verify: 생성된 팀 상세 페이지로 이동됨
    6. Test: "멤버 초대" 버튼 → 이메일 입력 → 초대 발송
    7. Verify: 대기 중인 초대 목록에 표시됨
    8. Confirm: 모든 UI가 디자인 시스템과 일관성 있게 표시됨
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` 빌드 성공
- [ ] `npx tsc --noEmit` 타입 검사 통과
- [ ] /teams 페이지 접근 가능
- [ ] 팀 생성 → 상세 → 초대 플로우 동작
- [ ] 디자인 일관성 확인 (human-verify)
</verification>

<success_criteria>

- useTeams 훅 10개 구현
- teamStore Zustand 스토어 구현
- 팀 목록/생성/상세 3개 페이지 구현
- TeamCard, TeamMemberList, InviteModal 3개 컴포넌트 구현
- 전체 CRUD + 초대 플로우 동작
- 디자인 시스템 준수
</success_criteria>

<output>
After completion, create `.planning/phases/21-team-features/21-03-SUMMARY.md`:

# Phase 21-03: Team Management UI Summary

**[한 줄 요약]**

## Accomplishments
- [구현 내용]

## Files Created/Modified
- `src/hooks/useTeams.ts` - 팀 관련 React Query 훅
- `src/stores/teamStore.ts` - 팀 선택 Zustand 스토어
- `src/app/teams/page.tsx` - 팀 목록 페이지
- `src/app/teams/new/page.tsx` - 팀 생성 페이지
- `src/app/teams/[teamId]/page.tsx` - 팀 상세 페이지
- `src/components/teams/TeamCard.tsx` - 팀 카드 컴포넌트
- `src/components/teams/TeamMemberList.tsx` - 멤버 목록 컴포넌트
- `src/components/teams/InviteModal.tsx` - 초대 모달 컴포넌트

## Decisions Made
[키 결정 및 근거]

## Issues Encountered
[문제점 및 해결책]

## Next Step
Ready for 21-04-PLAN.md (Team Notification Channel)
</output>
