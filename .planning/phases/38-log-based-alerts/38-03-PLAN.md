# 38-03 Plan: 로그 알림 규칙 UI

## Overview

로그 알림 규칙 관리를 위한 Admin UI를 구현합니다.

## Context

**Depends on**: 38-02 완료 (API, useLogAlerts 훅)

## Tasks

### Task 1: LogAlertRuleCard 컴포넌트

**File**: `src/components/log-alerts/LogAlertRuleCard.tsx` (NEW)

개별 로그 알림 규칙 표시 카드:

```tsx
interface LogAlertRuleCardProps {
  rule: LogAlertRule
  onEdit?: () => void
  onDelete?: () => void
  onToggle?: () => void
}

// 표시 정보:
// - 규칙명, 설명
// - 조건 타입 아이콘 (keyword/pattern/frequency)
// - 조건 요약 (키워드 목록, 패턴, 임계값 등)
// - 심각도 배지
// - 활성화 토글
// - 수정/삭제 버튼
```

### Task 2: LogAlertRuleForm 컴포넌트

**File**: `src/components/log-alerts/LogAlertRuleForm.tsx` (NEW)

규칙 생성/수정 폼:

```tsx
interface LogAlertRuleFormProps {
  rule?: LogAlertRule  // 수정 모드
  onSubmit: (data: NewLogAlertRule) => void
  onCancel: () => void
}

// 폼 필드:
// - name: 규칙명 (필수)
// - description: 설명 (선택)
// - conditionType: 조건 타입 선택 (keyword/pattern/frequency)
//
// 조건 타입별 필드:
// [keyword]
// - keywords: 키워드 입력 (태그 형식, 여러 개)
// - caseSensitive: 대소문자 구분 체크박스
//
// [pattern]
// - pattern: 정규식 패턴 입력
// - caseSensitive: 대소문자 구분 체크박스
//
// [frequency]
// - level: 타겟 레벨 선택 (error/warn 등)
// - threshold: 발생 횟수 입력
// - windowMinutes: 시간 윈도우 (분)
//
// 공통:
// - sources: 소스 필터 체크박스 (docker/journal/app)
// - severity: 심각도 선택 (info/warning/critical)
// - cooldown: 쿨다운 시간 (분 → 초 변환)
```

### Task 3: LogAlertRuleList 컴포넌트

**File**: `src/components/log-alerts/LogAlertRuleList.tsx` (NEW)

규칙 목록 표시:

```tsx
interface LogAlertRuleListProps {
  className?: string
}

// 기능:
// - 규칙 목록 로딩 (useLogAlertRules)
// - 빈 상태 메시지
// - 규칙 카드 렌더링 (LogAlertRuleCard)
// - 수정/삭제 액션 처리
// - 토글 액션 처리
```

### Task 4: Admin 로그 알림 규칙 페이지

**File**: `src/app/admin/log-alerts/page.tsx` (NEW)

```tsx
// 구조:
// - 페이지 헤더 (아이콘 + 제목 + 설명)
// - 규칙 추가 버튼 → 모달/시트 열기
// - LogAlertRuleList
// - 모달/시트: LogAlertRuleForm

// AdminOnly 권한 체크
// Dynamic Import로 폼 지연 로딩
```

### Task 5: Admin 사이드바 링크 추가

**File**: `src/components/layout/Sidebar.tsx` (MODIFY)

Admin 메뉴에 "로그 알림" 링크 추가:

```tsx
{
  name: '로그 알림',
  href: '/admin/log-alerts',
  icon: BellRing,  // lucide-react
}
```

위치: Logs 아래 또는 Alerts 옆

### Task 6: components/log-alerts/index.ts

**File**: `src/components/log-alerts/index.ts` (NEW)

컴포넌트 export 배럴 파일.

## Dependencies

- 38-02 (useLogAlerts 훅)
- 기존 UI 컴포넌트 (Card, Badge, Button, Dialog 등)
- react-hook-form (폼 관리)

## Verification

```bash
# 빌드 확인
npm run build

# 페이지 접근
# http://localhost:3000/admin/log-alerts

# 검증 사항:
# - 규칙 목록 표시
# - 규칙 추가 폼 동작
# - 조건 타입별 폼 필드 전환
# - 토글/수정/삭제 동작
```

## Notes

- 모바일 반응형 고려 (카드/폼 레이아웃)
- 접근성: ARIA 레이블, 키보드 네비게이션
- 정규식 패턴 유효성 검증 (실시간)
