# 기술 스택

> v2.2 기준 (2026-01-16 업데이트)

## 프론트엔드

| 기술 | 버전 | 용도 |
|------|------|------|
| **Next.js** | 16.1.1 | React 프레임워크 (App Router) |
| **React** | 19.2.3 | UI 라이브러리 |
| **TypeScript** | 5.x | 타입 안전성 |
| **Tailwind CSS** | 4.x | 유틸리티 기반 스타일링 |
| **Framer Motion** | 11.x | 애니메이션 & 인터랙션 |

## UI 라이브러리

| 라이브러리 | 용도 |
|------------|------|
| **Radix UI** | 접근성 있는 UI 컴포넌트 (Dialog, Tabs, Select 등) |
| **Lucide React** | 아이콘 라이브러리 |
| **class-variance-authority** | 컴포넌트 변형 관리 |
| **clsx + tailwind-merge** | 조건부 클래스 병합 |

## 상태 관리

| 라이브러리 | 용도 |
|------------|------|
| **Zustand** | 클라이언트 상태 (테마, 알림, 설정 등) |
| **TanStack Query** | 서버 상태 관리 및 캐싱 |
| **@tanstack/react-virtual** | 대용량 리스트 가상화 |

## 인증 & 보안

| 라이브러리 | 용도 |
|------------|------|
| **jose** | JWT 생성/검증 |
| **bcryptjs** | 비밀번호 해싱 |
| **Zod** | 런타임 스키마 검증 |

## 실시간 통신

| 라이브러리 | 용도 |
|------------|------|
| **ws** | WebSocket 서버 |
| **next-ws** | Next.js WebSocket 통합 |

## 알림

| 라이브러리 | 용도 |
|------------|------|
| **Resend** | 이메일 발송 (API) |
| **Slack Webhook** | Slack 알림 (Block Kit) |
| **Web Push** | 브라우저 푸시 알림 |

## 차트 & 시각화

| 라이브러리 | 용도 |
|------------|------|
| **Recharts** | 시스템 메트릭 시계열 차트 |
| **@xyflow/react** | K8s 서비스 토폴로지 그래프 (v2.2) |

## DevOps 통합 (v2.2)

| 라이브러리 | 용도 |
|------------|------|
| **@octokit/rest** | GitHub API 연동 (Actions, Workflows) |
| **@kubernetes/client-node** | Kubernetes API 연동 |
| **node-tail** | 파일 로그 실시간 수집 |
| **yaml** | Kubernetes kubeconfig 파싱 |

## 테스트

| 라이브러리 | 용도 |
|------------|------|
| **Vitest** | 단위/통합 테스트 |
| **Playwright** | E2E 브라우저 테스트 |
| **@testing-library/react** | 컴포넌트 테스트 유틸 |

## 배포 & 인프라

| 기술 | 용도 |
|------|------|
| **Docker** | 컨테이너화 (Node.js 20 Alpine) |
| **Docker Compose** | 멀티 컨테이너 오케스트레이션 |
| **Nginx** | 리버스 프록시 |

## 아키텍처 다이어그램

```
┌──────────────────────────────────────────────────────────────────────────┐
│                           Nginx (Port 443/80)                            │
└──────────────────────────────────────────────────────────────────────────┘
                                      │
                                      ▼
┌──────────────────────────────────────────────────────────────────────────┐
│                        home-krdn (Next.js 16)                            │
│                             (Port 3005)                                  │
│                                                                          │
│  ┌────────────────┐  ┌────────────────┐  ┌────────────────────────────┐ │
│  │  Landing Page  │  │ Service Pages  │  │      Admin Dashboard       │ │
│  │   (Public)     │  │   (Public)     │  │  (Auth Required + RBAC)    │ │
│  └────────────────┘  └────────────────┘  └────────────────────────────┘ │
│                                                                          │
│  ┌────────────────────────────────────────────────────────────────────┐ │
│  │                         API Routes                                  │ │
│  │  /api/auth  /api/system  /api/docker  /api/teams  /api/projects   │ │
│  │  /api/ports  /api/github  /api/logs  /api/kubernetes  /api/devops │ │
│  └────────────────────────────────────────────────────────────────────┘ │
│                                                                          │
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────────────┐ │
│  │  WebSocket (ws) │  │   SQLite DB     │  │   JSON File Storage     │ │
│  │  실시간 스트림  │  │  (users,teams)  │  │  (projects, settings)   │ │
│  └─────────────────┘  └─────────────────┘  └─────────────────────────┘ │
└──────────────────────────────────────────────────────────────────────────┘
        │                                              │
        ▼                                              ▼
┌───────────────────┐                     ┌─────────────────────────────┐
│  Docker Socket    │                     │     External Services       │
│ /var/run/docker   │                     │  Resend API, Slack Webhook  │
│   .sock           │                     │  Web Push, VAPID            │
└───────────────────┘                     │  GitHub API (v2.2)          │
                                          └─────────────────────────────┘
        │                                              │
        ▼                                              ▼
┌───────────────────┐                     ┌─────────────────────────────┐
│  Kubernetes API   │                     │        File Logs            │
│  (v2.2)           │                     │  /var/log/*, app logs       │
└───────────────────┘                     └─────────────────────────────┘
```

## 디자인 시스템

### 색상 (CSS Variables)

```css
/* Dark Theme (Default) */
--background: 240 10% 3.9%;
--foreground: 0 0% 98%;
--primary: 0 0% 98%;
--secondary: 240 3.7% 15.9%;
--success: 142 76% 36%;
--warning: 38 92% 50%;
--destructive: 0 62.8% 30.6%;

/* Light Theme */
--background: 0 0% 100%;
--foreground: 240 10% 3.9%;
```

### 타이포그래피

- **Sans**: Geist Sans
- **Mono**: Geist Mono

### 접근성 (v2.1)

- ARIA 속성 50+ 적용
- 포커스 트랩 (모달, 다이얼로그)
- 스킵 링크 (Skip to main content)
- `prefers-reduced-motion` 지원
- ESLint jsx-a11y 규칙 적용

## 핵심 패턴

### 레이어 구조

```
Presentation (React Components)
        ↓
    API Routes (/api/*)
        ↓
  Service Layer (/lib/services/)
        ↓
    Type Definitions (/types/)
```

### 상태 관리 전략

| 상태 유형 | 도구 | 예시 |
|----------|------|------|
| UI 상태 | React useState | 모달 열림/닫힘 |
| 클라이언트 전역 | Zustand | 테마, 알림 설정 |
| 서버 상태 | TanStack Query | API 데이터 캐싱 |
| 폼 상태 | React Hook Form | 폼 입력값 |

### 성능 최적화 (v2.1)

- `memo()`, `useMemo()`, `useCallback()` 적극 활용
- 조건부 가상화 (20+ 항목 시)
- Dynamic Import (폼 컴포넌트)
- Context 값 메모이제이션
